<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Manage Doctors - Admin Panel</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h2 { color: #2c3e50; border-bottom: 2px solid #5dade2; padding-bottom: 10px; }
        .btn { padding: 8px 15px; text-decoration: none; border-radius: 4px; font-size: 14px; cursor: pointer; border: none; }
        .btn-add { background-color: #27ae60; color: white; float: right; margin-bottom: 20px; }
        .btn-edit { background-color: #2980b9; color: white; margin-right: 5px; }
        .btn-delete { background-color: #c0392b; color: white; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #f8f9fa; color: #34495e; }
        tr:hover { background-color: #f1f1f1; }
    </style>
</head>
<body>

    <div class="container">
        <h2>Manage Doctors</h2>
        
        <!-- Link to the Add Doctor form -->
        <a th:href="@{/admin/add-doctor}" class="btn btn-add">Add New Doctor</a>

        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Specialization</th>
                    <th>Email</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Iterates over the 'listOfDoctors' provided by the controller -->
                <tr th:each="doctor : ${listOfDoctors}">
    <td th:text="${doctor.id}"></td>
    <td th:text="${doctor.name}"></td>
    
    <!-- FIX 1: Use 'qualification' to match your Doctor.java field -->
    <td th:text="${doctor.qualification}"></td>
    
    <!-- FIX 2: Safe navigation (?) in case user or email is null -->
    <td th:text="${doctor.user?.username ?: 'No Email'}"></td>
    
    <td>
        <a th:href="@{/admin/edit-doctor/{id}(id=${doctor.id})}" class="btn btn-edit">Edit</a>
        <form th:action="@{/admin/delete-doctor/{id}(id=${doctor.id})}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-delete" >
                Delete
            </button>
        </form>
    </td>
</tr>
            </tbody>
        </table>
    </div>

</body>
</html>
